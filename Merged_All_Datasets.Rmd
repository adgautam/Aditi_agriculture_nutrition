---
title: "Merging_All_Datasets"
author: "Aditi Gautam"
date: "12/07/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
	echo = TRUE,
	message = FALSE,
	warning = FALSE,
	rows.print=5
)

options(tibble.max_extra_cols = 5, tibble.print_max = 5)

library(fs) # cross-platform file system operations
library(tidyverse)
library(skimr)
library(sf)
```

Loading all datasets
```{r}
agri <- read_csv(path("01_Agriculture/Agridata_Cleaned_nopunjab.csv"))
nfhs2015 <- read_csv(path("02_Nutrition/NFHS2015_Cleaned.csv"))
districts <- read_sf(path("03_Geodata/data/polbnda_ind.shp")) 
```


```{r}
agri_nfhs <- merge(agri, nfhs2015, by.x = "district", by.y = "district")
merged_data <- merge(districts, agri_nfhs, by.x = "laa", by.y = "district") %>% st_as_sf() 
distinct(merged_data)
```

```{r}
ggplot(data = merged_data) +
    geom_sf(aes(fill = stunting_range_d))
```

https://r-spatial.github.io/sf/reference/geos_unary.html